 # PTSDå¡”é˜²éŠæˆ²æ¶æ§‹æ–‡æª”

## ğŸ“‹ ç›®éŒ„
1. [æ•´é«”æ¶æ§‹åœ–](#1-æ•´é«”æ¶æ§‹åœ–)
2. [é˜²ç¦¦å¡”ç³»çµ±è©³ç´°åœ–](#2-é˜²ç¦¦å¡”ç³»çµ±è©³ç´°åœ–)
3. [æ”»æ“Šç³»çµ±è©³ç´°åœ–](#3-æ”»æ“Šç³»çµ±è©³ç´°åœ–)
4. [æ•µäººå’ŒUIç³»çµ±è©³ç´°åœ–](#4-æ•µäººå’Œuiç³»çµ±è©³ç´°åœ–)
5. [æ¶æ§‹èªªæ˜](#5-æ¶æ§‹èªªæ˜)

---

## 1. æ•´é«”æ¶æ§‹åœ–

æ­¤åœ–å±•ç¤ºäº†ç³»çµ±çš„ä¸»è¦çˆ¶é¡å’Œå®ƒå€‘ä¹‹é–“çš„æ ¸å¿ƒé—œä¿‚ï¼Œæä¾›æ•´å€‹é …ç›®çš„é«˜å±¤æ¬¡æ¦‚è¦½ã€‚

```mermaid
classDiagram
    %% æ•´é«”æ¶æ§‹ - ä¸»è¦çˆ¶é¡é—œä¿‚
    
    class GameObject {
        <<abstract>>
        +m_transform Transform
        +m_drawable unique_ptr~Drawable~
        +m_children vector~GameObject~
        +Update() void
        +Draw() void
    }
    
    class Drawable {
        <<interface>>
        +Draw() void
        +GetSize() glm::vec2
    }
    
    class Monkey {
        +m_attributes Attributes
        +m_range Range
        +m_informationBoard InformationBoard
        +m_attacks vector~Attack~
        +ProduceAttack() vector~Attack~
    }
    
    class Attack {
        +m_attributes Attributes
        +m_unitDirection glm::vec2
        +Move() void
        +IsAlive() bool
        +IsOut() bool
    }
    
    class Balloon {
        +m_type Type
        +m_health int
        +m_speed float
        +m_debuffViews vector~DebuffView~
        +TakeDamage() void
    }
    
    class Button {
        +OnClick() void
    }
    
    class Counter {
        +m_counterText CounterText
        +UpdateValue() void
    }
    
    class App {
        +m_state State
        +m_gameObjects vector~GameObject~
        +Update() void
        +Render() void
    }
    
    %% ä¸»è¦ç¹¼æ‰¿é—œä¿‚
    GameObject <|-- Monkey
    GameObject <|-- Attack
    GameObject <|-- Balloon  
    GameObject <|-- Button
    GameObject <|-- Counter
    
    %% çµ„åˆé—œä¿‚
    GameObject o-- Transform
    GameObject o-- Drawable
    Monkey o-- Attributes
    Monkey o-- Range
    Attack o-- Attributes
    Balloon o-- DebuffView
    App o-- GameObject
    
    %% ä¸»è¦ç³»çµ±æ¨¡çµ„
    note for Monkey "é˜²ç¦¦å¡”ç³»çµ±<br/>- 9ç¨®çŒ´å­é¡å‹<br/>- å„æœ‰å‡ç´šè·¯å¾‘"
    note for Attack "æ”»æ“Šç³»çµ±<br/>- 40+ç¨®æ”»æ“Šé¡å‹<br/>- è¤‡é›œè¡Œç‚ºæ¨¡å¼"
    note for Balloon "æ•µäººç³»çµ±<br/>- å¤šç¨®æ°£çƒé¡å‹<br/>- å¢ç›Šæ•ˆæœç³»çµ±"
```

**é—œéµçµ„ä»¶èªªæ˜ï¼š**
- **GameObject**: æ‰€æœ‰éŠæˆ²ç‰©ä»¶çš„åŸºé¡ï¼Œæä¾›ä½ç½®ã€ç¹ªè£½å’Œå­ç‰©ä»¶ç®¡ç†
- **Monkey**: é˜²ç¦¦å¡”åŸºé¡ï¼Œè² è²¬ç”Ÿç”¢æ”»æ“Šå’Œç®¡ç†å±¬æ€§
- **Attack**: æ‰€æœ‰æ”»æ“Šé¡å‹çš„åŸºé¡ï¼ŒåŒ…å«ç§»å‹•å’Œç¢°æ’é‚è¼¯
- **Balloon**: æ•µäººåŸºé¡ï¼Œç®¡ç†ç”Ÿå‘½å€¼å’Œå¢ç›Šæ•ˆæœ
- **App**: ä¸»è¦éŠæˆ²æ§åˆ¶å™¨ï¼Œç®¡ç†æ‰€æœ‰éŠæˆ²ç‰©ä»¶

---

## 2. é˜²ç¦¦å¡”ç³»çµ±è©³ç´°åœ–

å±•ç¤ºå®Œæ•´çš„é˜²ç¦¦å¡”ç¹¼æ‰¿é«”ç³»ï¼ŒåŒ…å«12ç¨®ä¸åŒçš„çŒ´å­é¡å‹åŠå…¶ç‰¹æ®ŠåŠŸèƒ½ã€‚

```mermaid
classDiagram
    %% é˜²ç¦¦å¡”ç³»çµ±è©³ç´°æ¶æ§‹
    
    class Monkey {
        +m_attributes Attributes
        +m_range Range
        +m_informationBoard InformationBoard
        +m_attacks vector~Attack~
        +m_level int
        +m_upgradePath int
        +ProduceAttack() vector~Attack~
        +UpdateLevel() void
        +UseSkill() void
    }
    
    class DartMonkey {
        +skillEffect bool
        +ProduceAttack() vector~Attack~
        +UseSkill() void
    }
    
    class NailMonkey {
        +skillEffect bool
        +ProduceAttack() vector~Attack~
    }
    
    class SniperMonkey {
        +ProduceAttack() vector~Attack~
    }
    
    class BoomerangMonkey {
        +has_BladedDisc_Around bool
        +skillEffect bool
        +ProduceAttack() vector~Attack~
    }
    
    class NinjaMonkey {
        +ProduceAttack() vector~Attack~
    }
    
    class Cannon {
        +ProduceAttack() vector~Attack~
    }
    
    class Airport {
        +m_Airplanes vector~Attack~
        +airplane_num int
        +ProduceAttack() vector~Attack~
    }
    
    class BuccaneerMonkey {
        +m_Airplanes vector~Attack~
        +airplane_num int
        +ProduceAttack() vector~Attack~
    }
    
    class SuperMonkey {
        +absorbed_monkeys vector~Monkey~
        +skillEffect bool
        +ProduceAttack() vector~Attack~
    }
    
    class IceMonkey {
        +ProduceAttack() vector~Attack~
    }
    
    class RubberMonkey {
        +ProduceAttack() vector~Attack~
    }
    
    class MagicMonkey {
        +ProduceAttack() vector~Attack~
    }
    
    %% æ”¯æ´é¡åˆ¥
    class Attributes {
        +penetration int
        +power int
        +speed float
        +properties set~string~
        +debuffs vector~Debuff~
    }
    
    class Range {
        +radius float
        +Draw() void
    }
    
    class InformationBoard {
        +m_informationImage InformationImage
        +m_informationText InformationText
        +m_informationButton InformationButton
    }
    
    %% ç¹¼æ‰¿é—œä¿‚
    Monkey <|-- DartMonkey
    Monkey <|-- NailMonkey
    Monkey <|-- SniperMonkey
    Monkey <|-- BoomerangMonkey
    Monkey <|-- NinjaMonkey
    Monkey <|-- Cannon
    Monkey <|-- Airport
    Monkey <|-- BuccaneerMonkey
    Monkey <|-- SuperMonkey
    Monkey <|-- IceMonkey
    Monkey <|-- RubberMonkey
    Monkey <|-- MagicMonkey
    
    %% çµ„åˆé—œä¿‚
    Monkey o-- Attributes
    Monkey o-- Range
    Monkey o-- InformationBoard
    Airport o-- Attack : m_Airplanes
    BuccaneerMonkey o-- Attack : m_Airplanes
    SuperMonkey o-- Monkey : absorbed_monkeys
```

**ç‰¹æ®ŠçŒ´å­åŠŸèƒ½ï¼š**
- **Airport & BuccaneerMonkey**: ç®¡ç†é£›æ©Ÿæ”»æ“Šå–®ä½
- **SuperMonkey**: å¯ä»¥å¸æ”¶å…¶ä»–çŒ´å­ç²å¾—èƒ½åŠ›
- **IceMonkey**: å°ˆé–€æ–½åŠ å†°å‡å¢ç›Šæ•ˆæœ
- **Cannon**: ç™¼å°„çˆ†ç‚¸æ€§æ”»æ“Š

---

## 3. æ”»æ“Šç³»çµ±è©³ç´°åœ–

æŒ‰åŠŸèƒ½åˆ†çµ„å±•ç¤º40+ç¨®æ”»æ“Šé¡å‹ï¼Œæ¯å€‹åˆ†çµ„åŒ…å«å…·æœ‰ç›¸ä¼¼è¡Œç‚ºæ¨¡å¼çš„æ”»æ“Šã€‚

```mermaid
classDiagram
    %% æ”»æ“Šç³»çµ±è©³ç´°æ¶æ§‹
    
    class Attack {
        +m_attributes Attributes
        +m_unitDirection glm::vec2
        +m_radian float
        +m_corners vector~glm::vec2~
        +Move() void
        +IsAlive() bool
        +IsOut() bool
        +SetPosition() void
        +SetRotation() void
    }
    
    %% åŸºç¤æŠ•å°„ç‰©
    namespace BasicProjectiles {
        class Dart {
            +Move() void
        }
        
        class Nail {
            +m_radius int
            +m_sourcePosition glm::vec2
            +Move() void
        }
        
        class Superlight {
            +Move() void
        }
        
        class Ray {
            +Move() void
        }
        
        class Rubber {
            +Move() void
        }
    }
    
    %% è¿´æ—‹æ”»æ“Š
    namespace BoomerangAttacks {
        class Boomerang {
            +isTurn int
            +WillNotDisappear bool
            +m_goalPosition glm::vec2
            +Move() void
            +RotationUnitDirection() void
        }
        
        class BladedDisc {
            +isTurn int
            +rotation int
            +Move() void
            +RotationImage() void
        }
        
        class BladedDisc_Rebound {
            +rotation int
            +Move() void
        }
        
        class BladedDisc_Around {
            +renewPenetrationCd int
            +WillNotDisappear bool
            +Move() void
        }
    }
    
    %% æ—‹è½‰æ”»æ“Š
    namespace SpinningAttacks {
        class Shuriken {
            +rotation int
            +Move() void
            +RotationImage() void
        }
        
        class NinjaShuriken {
            +m_currentState State
            +m_randomMovementTime int
            +Move() void
            +CalculateNewDirection() void
        }
        
        class Knife {
            +m_radius int
            +Move() void
        }
    }
    
    %% çˆ†ç‚¸æ”»æ“Š
    namespace ExplosiveAttacks {
        class Bomb {
            +Move() void
        }
        
        class Explosion {
            +existTime int
            +m_bomb Attack
            +IsAlive() bool
        }
        
        class Explosion_slice {
            +existTime int
            +Move() void
        }
        
        class Explosionlight {
            +existTime int
            +IsAlive() bool
        }
        
        class smallbomb {
            +existTime int
            +Move() void
        }
        
        class Nuclear_bomb {
            +time int
            +Move() void
            +RotationImage() void
        }
    }
    
    %% å€åŸŸæ•ˆæœ
    namespace AreaEffects {
        class Blizzard {
            +exit int
            +Move() void
            +IsOut() bool
        }
        
        class Fire {
            +exit int
            +m_scale float
            +Move() void
        }
        
        class WindAttack {
            +m_hasReachedGoal bool
            +m_stayDuration int
            +Move() void
        }
    }
    
    %% ç‰¹æ®Šæ”»æ“Š
    namespace SpecialAttacks {
        class Airplane {
            +time int
            +max_Penetration int
            +WillNotDisappear bool
            +Move() void
            +RotationImage() void
        }
        
        class TheBird {
            +time int
            +m_centerPosition glm::vec2
            +m_radius float
            +m_currentAngle float
            +Move() void
            +RotateImage() void
        }
        
        class Rope {
            +m_sourcePosition glm::vec2
            +m_targetPosition glm::vec2
            +time int
        }
        
        class Rope_tail {
            +m_isReturning bool
            +m_isFinished bool
            +CheckAndReverse() bool
        }
    }
    
    %% ç¹¼æ‰¿é—œä¿‚
    Attack <|-- Dart
    Attack <|-- Nail
    Attack <|-- Superlight
    Attack <|-- Ray
    Attack <|-- Rubber
    
    Attack <|-- Boomerang
    Attack <|-- BladedDisc
    Attack <|-- BladedDisc_Rebound
    Attack <|-- BladedDisc_Around
    
    Attack <|-- Shuriken
    Attack <|-- NinjaShuriken
    Attack <|-- Knife
    
    Attack <|-- Bomb
    Attack <|-- Explosion
    Attack <|-- Explosion_slice
    Attack <|-- Explosionlight
    Attack <|-- smallbomb
    Attack <|-- Nuclear_bomb
    
    Attack <|-- Blizzard
    Attack <|-- Fire
    Attack <|-- WindAttack
    
    Attack <|-- Airplane
    Attack <|-- TheBird
    Attack <|-- Rope
    Attack <|-- Rope_tail
```

**æ”»æ“Šé¡å‹åˆ†çµ„èªªæ˜ï¼š**
- **åŸºç¤æŠ•å°„ç‰©**: ç›´ç·šç§»å‹•çš„ç°¡å–®æ”»æ“Š
- **è¿´æ—‹æ”»æ“Š**: å…·æœ‰è¿”å›æ©Ÿåˆ¶çš„æ”»æ“Š
- **æ—‹è½‰æ”»æ“Š**: è‡ªè½‰ä¸¦ç§»å‹•çš„æ”»æ“Š
- **çˆ†ç‚¸æ”»æ“Š**: å…·æœ‰çˆ†ç‚¸æ•ˆæœçš„å€åŸŸæ”»æ“Š
- **å€åŸŸæ•ˆæœ**: æŒçºŒæ™‚é–“çš„ç¯„åœæ”»æ“Š
- **ç‰¹æ®Šæ”»æ“Š**: å…·æœ‰ç¨ç‰¹è¡Œç‚ºæ¨¡å¼çš„æ”»æ“Š

---

## 4. æ•µäººå’ŒUIç³»çµ±è©³ç´°åœ–

å±•ç¤ºæ•µäººé¡å‹çš„å®Œæ•´ç¹¼æ‰¿é«”ç³»å’ŒUIçµ„ä»¶æ¶æ§‹ã€‚

```mermaid
classDiagram
    %% æ•µäººç³»çµ±å’ŒUIç³»çµ±è©³ç´°æ¶æ§‹
    
    namespace EnemySystem {
        class Balloon {
            +m_type Type
            +m_health int
            +m_speed float
            +m_coordinate vector~glm::vec2~
            +m_debuffViews vector~DebuffView~
            +TakeDamage() void
            +Move() void
            +IsAlive() bool
        }
        
        class REDBalloon {
            +Move() void
        }
        
        class BLUEBalloon {
            +Move() void
        }
        
        class GREENBalloon {
            +Move() void
        }
        
        class YELLOWBalloon {
            +Move() void
        }
        
        class PINKBalloon {
            +Move() void
        }
        
        class BLACKBalloon {
            +Move() void
        }
        
        class WHITEBalloon {
            +Move() void
        }
        
        class MOABBalloon {
            +Move() void
        }
        
        class BFBBalloon {
            +Move() void
        }
        
        class ZOMGBalloon {
            +Move() void
        }
        
        class DDTBalloon {
            +Move() void
        }
        
        class BADBalloon {
            +Move() void
        }
        
        class DebuffView {
            +Apply() void
            +Remove() void
            +Update() void
        }
        
        class SnowDebuffView {
            +Apply() void
        }
        
        class IceDebuffView {
            +Apply() void
        }
        
        class MucusDebuffView {
            +Apply() void
        }
        
        class FireDebuffView {
            +Apply() void
        }
    }
    
    namespace UISystem {
        class Button {
            +OnClick() void
            +SetCallback() void
        }
        
        class Counter {
            +m_counterText CounterText
            +UpdateValue() void
            +GetValue() int
        }
        
        class Heart {
            +DecreaseLives() void
            +GetLives() int
        }
        
        class Money {
            +AddMoney() void
            +SpendMoney() bool
            +GetAmount() int
        }
        
        class Round {
            +NextRound() void
            +GetCurrentRound() int
        }
        
        class InformationBoard {
            +m_informationImage InformationImage
            +m_informationText InformationText
            +m_informationButton InformationButton
            +Show() void
            +Hide() void
        }
        
        class InformationImage {
            +SetImage() void
        }
        
        class InformationText {
            +SetText() void
        }
        
        class InformationButton {
            +SetCallback() void
        }
    }
    
    %% ç¹¼æ‰¿é—œä¿‚ - æ•µäººç³»çµ±
    Balloon <|-- REDBalloon
    Balloon <|-- BLUEBalloon
    Balloon <|-- GREENBalloon
    Balloon <|-- YELLOWBalloon
    Balloon <|-- PINKBalloon
    Balloon <|-- BLACKBalloon
    Balloon <|-- WHITEBalloon
    Balloon <|-- MOABBalloon
    Balloon <|-- BFBBalloon
    Balloon <|-- ZOMGBalloon
    Balloon <|-- DDTBalloon
    Balloon <|-- BADBalloon
    
    DebuffView <|-- SnowDebuffView
    DebuffView <|-- IceDebuffView
    DebuffView <|-- MucusDebuffView
    DebuffView <|-- FireDebuffView
    
    %% ç¹¼æ‰¿é—œä¿‚ - UIç³»çµ±
    Counter <|-- Heart
    Counter <|-- Money
    Counter <|-- Round
    
    %% çµ„åˆé—œä¿‚
    Balloon o-- DebuffView
    InformationBoard o-- InformationImage
    InformationBoard o-- InformationText
    InformationBoard o-- InformationButton
```

**æ•µäººé¡å‹èªªæ˜ï¼š**
- **åŸºç¤æ°£çƒ**: RED, BLUE, GREEN, YELLOW, PINK, BLACK, WHITE
- **é«˜ç´šæ°£çƒ**: MOAB, BFB, ZOMG, DDT, BAD (å…·æœ‰æ›´é«˜ç”Ÿå‘½å€¼å’Œç‰¹æ®Šèƒ½åŠ›)
- **å¢ç›Šæ•ˆæœ**: Snow(æ¸›é€Ÿ), Ice(å†°å‡), Mucus(é»æ¶²), Fire(ç‡ƒç‡’)

**UIçµ„ä»¶èªªæ˜ï¼š**
- **Counterç³»çµ±**: ç®¡ç†éŠæˆ²ä¸­çš„æ•¸å€¼é¡¯ç¤º
- **InformationBoard**: é˜²ç¦¦å¡”è³‡è¨Šé¡¯ç¤ºé¢æ¿
- **Button**: äº’å‹•å¼æŒ‰éˆ•çµ„ä»¶

---

## 5. æ¶æ§‹èªªæ˜

### ğŸ—ï¸ **è¨­è¨ˆæ¨¡å¼**
1. **ç¹¼æ‰¿æ¨¡å¼**: ä½¿ç”¨è™›æ“¬å‡½æ•¸å¯¦ç¾å¤šæ…‹è¡Œç‚º
2. **çµ„åˆæ¨¡å¼**: GameObjectåŒ…å«Transformå’ŒDrawableçµ„ä»¶
3. **ç­–ç•¥æ¨¡å¼**: ä¸åŒæ”»æ“Šé¡å‹å¯¦ç¾ä¸åŒçš„Move()è¡Œç‚º
4. **è§€å¯Ÿè€…æ¨¡å¼**: UIç³»çµ±éŸ¿æ‡‰éŠæˆ²ç‹€æ…‹è®ŠåŒ–

### ğŸ”§ **æ ¸å¿ƒæ¶æ§‹ç‰¹é»**
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: æ¸…æ¥šåˆ†é›¢æ¸²æŸ“ã€éŠæˆ²é‚è¼¯ã€UIç³»çµ±
- **å¯æ“´å±•æ€§**: æ˜“æ–¼æ·»åŠ æ–°çš„çŒ´å­ã€æ”»æ“Šå’Œæ•µäººé¡å‹
- **å¤šæ…‹æ€§**: å»£æ³›ä½¿ç”¨è™›æ“¬å‡½æ•¸æ”¯æŒå‹•æ…‹è¡Œç‚º
- **è³‡æºç®¡ç†**: ä½¿ç”¨æ™ºèƒ½æŒ‡é‡ç®¡ç†ç‰©ä»¶ç”Ÿå‘½é€±æœŸ

### ğŸ“Š **ç³»çµ±çµ±è¨ˆ**
- **é˜²ç¦¦å¡”é¡å‹**: 12ç¨®ä¸åŒçš„çŒ´å­
- **æ”»æ“Šé¡å‹**: 40+ç¨®ä¸åŒçš„æ”»æ“Šæ–¹å¼
- **æ•µäººé¡å‹**: 12ç¨®æ°£çƒ + 4ç¨®å¢ç›Šæ•ˆæœ
- **UIçµ„ä»¶**: å®Œæ•´çš„éŠæˆ²ç•Œé¢ç³»çµ±

### ğŸ¯ **æŠ€è¡“äº®é»**
- **è¤‡é›œçš„æ”»æ“Šç³»çµ±**: æ”¯æŒç›´ç·šã€è¿´æ—‹ã€çˆ†ç‚¸ã€å€åŸŸç­‰å¤šç¨®æ”»æ“Šæ¨¡å¼
- **è±å¯Œçš„å‡ç´šç³»çµ±**: æ¯å€‹çŒ´å­éƒ½æœ‰å¤šæ¢å‡ç´šè·¯å¾‘
- **è¦–è¦ºæ•ˆæœç³»çµ±**: å®Œæ•´çš„å¢ç›Šæ•ˆæœè¦–è¦ºåé¥‹
- **æ¨¡çµ„åŒ–UI**: å¯é‡ç”¨çš„UIçµ„ä»¶æ¶æ§‹

---

*æ­¤æ–‡æª”åŸºæ–¼PTSDå¡”é˜²éŠæˆ²çš„C++åŸå§‹ç¢¼åˆ†æç”Ÿæˆï¼Œå±•ç¤ºäº†å®Œæ•´çš„é¢å‘å°è±¡æ¶æ§‹è¨­è¨ˆã€‚*